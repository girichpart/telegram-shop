(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,157365,e=>{"use strict";let t;var l=e.i(843476),a=e.i(568692),s=e.i(623200),n=e.i(271645);let i=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,r=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,o=/\.(m3u8)($|\?)/i,c=/\.(mpd)($|\?)/i,d=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,u=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,m=/vimeo\.com\/(?!progressive_redirect).+/,f=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,h=/open\.spotify\.com\/(\w+)\/(\w+)/i,p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,g=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,x=(e,t)=>{if(Array.isArray(e)){for(let l of e)if("string"==typeof l&&x(l,t)||x(l.src,t))return!0;return!1}return t(e)},v=n.default.forwardRef((e,t)=>{let l=i.test(`${e.src}`)?"audio":"video";return n.default.createElement(l,{...e,ref:t},e.children)}),y=[{key:"hls",name:"hls.js",canPlay:e=>x(e,e=>o.test(e)),canEnablePIP:()=>!0,player:(0,n.lazy)(()=>e.A(852953))},{key:"dash",name:"dash.js",canPlay:e=>x(e,e=>c.test(e)),canEnablePIP:()=>!0,player:(0,n.lazy)(()=>e.A(264594))},{key:"mux",name:"Mux",canPlay:e=>d.test(e),canEnablePIP:()=>!0,player:(0,n.lazy)(()=>e.A(794375))},{key:"youtube",name:"YouTube",canPlay:e=>u.test(e),player:(0,n.lazy)(()=>e.A(641554))},{key:"vimeo",name:"Vimeo",canPlay:e=>m.test(e)&&!r.test(e)&&!o.test(e),player:(0,n.lazy)(()=>e.A(409705))},{key:"wistia",name:"Wistia",canPlay:e=>f.test(e),canEnablePIP:()=>!0,player:(0,n.lazy)(()=>e.A(364603))},{key:"spotify",name:"Spotify",canPlay:e=>h.test(e),canEnablePIP:()=>!1,player:(0,n.lazy)(()=>e.A(699195))},{key:"twitch",name:"Twitch",canPlay:e=>p.test(e),canEnablePIP:()=>!1,player:(0,n.lazy)(()=>e.A(478449))},{key:"tiktok",name:"TikTok",canPlay:e=>g.test(e),canEnablePIP:()=>!1,player:(0,n.lazy)(()=>e.A(296152))},{key:"html",name:"html",canPlay:e=>x(e,e=>i.test(e)||r.test(e)),canEnablePIP:()=>!0,player:v}],b={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},j=n.default.forwardRef((e,t)=>{let{playing:l,pip:a}=e,s=e.activePlayer,i=(0,n.useRef)(null),r=(0,n.useRef)(!0);if((0,n.useEffect)(()=>{var t,a;i.current&&(i.current.paused&&!0===l&&i.current.play(),i.current.paused||!1!==l||i.current.pause(),i.current.playbackRate=null!=(t=e.playbackRate)?t:1,i.current.volume=null!=(a=e.volume)?a:1)}),(0,n.useEffect)(()=>{var e,t,l,s,n;if(i.current&&globalThis.document){if(a&&!document.pictureInPictureElement)try{null==(t=(e=i.current).requestPictureInPicture)||t.call(e)}catch(e){}if(!a&&document.pictureInPictureElement)try{null==(s=(l=i.current).exitPictureInPicture)||s.call(l),null==(n=document.exitPictureInPicture)||n.call(document)}catch(e){}}},[a]),!s)return null;let o={},c=["onReady","onStart"];for(let t in e)t.startsWith("on")&&!c.includes(t)&&(o[t]=e[t]);return n.default.createElement(s,{...o,style:e.style,className:e.className,slot:e.slot,ref:(0,n.useCallback)(e=>{i.current=e,"function"==typeof t?t(e):null!==t&&(t.current=e)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:t=>{var l,a;r.current=!0,null==(l=e.onReady)||l.call(e),null==(a=e.onLoadStart)||a.call(e,t)},onPlay:t=>{var l,a;r.current&&(r.current=!1,null==(l=e.onStart)||l.call(e,t)),null==(a=e.onPlay)||a.call(e,t)}},e.children)});j.displayName="Player";let w=(0,n.lazy)(()=>e.A(743801)),k=[],N=({children:e})=>e,S=y[y.length-1];var P=((t=n.default.forwardRef((e,t)=>{let l={...b,...e},{src:a,slot:s,className:i,style:r,width:o,height:c,fallback:d,wrapper:u}=l,[m,f]=(0,n.useState)(!!l.light);(0,n.useEffect)(()=>{l.light?f(!0):f(!1)},[l.light]);let h=e=>{var t;f(!1),null==(t=l.onClickPreview)||t.call(l,e)},p=null==u?N:u,g=!1===d?N:n.Suspense;return n.default.createElement(p,{slot:s,className:i,style:{width:o,height:c,...r}},n.default.createElement(g,{fallback:d},m?(e=>{if(!e)return null;let{light:t,playIcon:a,previewTabIndex:s,oEmbedUrl:i,previewAriaLabel:r}=l;return n.default.createElement(w,{src:e,light:t,playIcon:a,previewTabIndex:s,previewAriaLabel:r,oEmbedUrl:i,onClickPreview:h})})(a):(e=>{var a,r;let o=(e=>{for(let t of[...k,...y])if(e&&t.canPlay(e))return t;return S||null})(e);if(!o)return null;let{style:c,width:d,height:u,wrapper:m}=l,f=null==(a=l.config)?void 0:a[o.key];return n.default.createElement(j,{...l,ref:t,activePlayer:null!=(r=o.player)?r:o,slot:m?void 0:s,className:m?void 0:i,style:m?{display:"block",width:"100%",height:"100%"}:{display:"block",width:d,height:u,...c},config:f})})(a)))})).displayName="ReactPlayer",t.addCustomPlayer=e=>{k.push(e)},t.removeCustomPlayers=()=>{k.length=0},t.canPlay=e=>{if(e){for(let t of[...k,...y])if(t.canPlay(e))return!0}return!1},t.canEnablePIP=e=>{var t;if(e){for(let l of[...k,...y])if(l.canPlay(e)&&(null==(t=l.canEnablePIP)?void 0:t.call(l)))return!0}return!1},t);let E=({onClick:e,name:t,ariaLabel:s,enabled:n})=>n?(0,l.jsx)("button",{className:"flex",onClick:e,"aria-label":s,children:(0,l.jsx)(a.default,{name:t,className:"h-5 w-5 [&>svg]:h-full [&>svg]:w-full"})}):null,C=({src:e,poster:t,controlOptions:i,muted:r,loop:o,autoPlay:c,aspectRatio:d,className:u,volume:m=null})=>{let f=(0,n.useRef)(null),h=(0,n.useRef)(null),[p,g]=(0,n.useState)(c),[x,v]=(0,n.useState)(r),[y,b]=(0,n.useState)(!0),[j,w]=(0,n.useState)(!1),k=i?.fullscreen||i?.muteUnmute||i?.playPause;(0,n.useEffect)(()=>{w(!0),v(r)},[r]);let N=()=>{g(!p)};return j?(0,l.jsx)("div",{ref:h,className:(0,s.cn)({auto:"w-full h-full",wide:"aspect-[16/9]",portrait:"aspect-[4/5]"}[d],"relative"),children:(0,l.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,l.jsx)(P,{ref:f,src:e,playing:p,playsInline:c,muted:x,controls:!1,volume:m,loop:o,width:"100%",height:"100%",className:(0,s.cn)("object-cover object-center",u),onPlay:()=>b(!1)}),k&&(0,l.jsxs)(l.Fragment,{children:[!p&&(0,l.jsx)("button",{onClick:N,"aria-label":"Play and Pause video",className:"transformr absolute left-1/2 top-1/2 z-20 -translate-x-1/2 -translate-y-1/2 cursor-pointer",children:(0,l.jsx)(a.default,{name:"circle-play"})}),(0,l.jsxs)("div",{className:"absolute !top-auto bottom-5 z-30 flex !h-5 w-full items-center gap-4 pl-8 text-secondary",children:[(0,l.jsx)(E,{onClick:N,name:p?"pause":"play",ariaLabel:"Toggle Play/Pause",enabled:i?.playPause}),(0,l.jsx)(E,{onClick:()=>{v(!x)},name:x?"unmute":"mute",ariaLabel:"Toggle Mute/Unmute",enabled:i?.muteUnmute}),(0,l.jsx)(E,{onClick:()=>{if(j)if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{let e=h.current;e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},name:"full-screen",ariaLabel:"Toggle Fullscreen",enabled:i?.fullscreen})]})]}),y&&(0,l.jsx)("img",{src:t,onClick:N,alt:"",className:"absolute left-0 top-0 z-10 h-full w-full cursor-pointer object-cover"})]})}):(0,l.jsx)("div",{})},I=({src:e,poster:t,muted:a=!0,loop:s=!0,autoPlay:n=!1,aspectRatio:i="wide",volume:r=null,controlOptions:o,className:c})=>(0,l.jsx)(C,{src:e,poster:t,muted:a,controlOptions:o,loop:s,volume:r,autoPlay:n,aspectRatio:i,className:c});e.s(["Video",()=>I],157365)},174729,e=>{"use strict";var t=e.i(843476),l=e.i(623200),a=e.i(634505),s=e.i(157365),n=e.i(416883),i=e.i(271645),r=e.i(207670),o=e.i(167225),c=e.i(668229),d=e.i(449120),u=e.i(266027),m=e.i(668087),f=e.i(647410),h=e.i(446614);let p=({btn:e})=>{let[l,a]=(0,i.useState)(!1),{data:s,isLoading:n,error:p}=(0,u.useQuery)({queryKey:["activeCampaign-form",e?.activeCampaign?.formId],queryFn:async()=>{if(o.default.env.STORYBOOK)return m.mockForm;let t=await fetch(`/api/activeCampaign/forms/${e?.activeCampaign?.formId}`);if(!t.ok)throw Error(`Failed to fetch form: ${t.status}`);return(await t.json()).data.form},staleTime:3e5,enabled:!!e?.activeCampaign?.formId}),g=(0,i.useMemo)(()=>e?.buttonColor?.primary&&e?.buttonStyle?.variant!=="default"?e?.buttonStyle?.variant&&e?.buttonStyle?.variant!=="outline"?"bg-[--secondary] border-[--secondary] text-[--primary] hover:bg-[--secondary] hover:text-[--primary]":"border-[--secondary] text-[--secondary] hover:bg-[--secondary] hover:text-[--primary]":"",[e?.buttonColor?.primary,e?.buttonStyle?.variant]),x={"--primary":e?.buttonColor?.primary,"--secondary":e?.buttonColor?.secondary},v=(0,i.useMemo)(()=>e?.btnLink?.[0]?.includes("#")||!1,[e?.btnLink]),y=v?(0,t.jsx)("a",{href:e?.btnLink?.[0],children:e?.btnText}):s?(0,t.jsx)("span",{className:"cursor-pointer",children:e?.btnText}):(0,t.jsx)(c.default,{href:(0,f.resolveHref)(e?.pageType,e?.pageType==="frontPage"?"":e?.btnLink),children:e?.btnText}),b=s&&!n?()=>a(!0):void 0;return(0,t.jsxs)("div",{style:x,children:[(0,t.jsx)(d.Button,{className:(0,r.default)("min-w-[140px]",g),variant:e?.buttonStyle?.variant||"outline",theme:"light",asSpan:!0,onClick:b,disabled:n,children:y}),v&&(0,t.jsx)("style",{children:`
            html {
              scroll-behavior: smooth;
              scroll-padding-top: calc(var(--header-height) + var(--notification-height));
            }
          `}),s&&(0,t.jsx)(h.NewsletterSignUp,{open:l,setIsOpen:a,data:s,title:e?.activeCampaign?.formTitle,description:e?.activeCampaign?.formDescription}),p&&!1]})},g=e=>{let o={"left-top":["object-left-top","md:object-left-top"],left:["object-left","md:object-left"],"left-bottom":["object-left-bottom","md:object-left-bottom"],top:["object-top","md:object-top"],center:["object-center","md:object-center"],bottom:["object-bottom","md:object-bottom"],"right-top":["object-right-top","md:object-right-top"],right:["object-right","md:object-right"],"right-bottom":["object-right-bottom","md:object-right-bottom"]},c={top:"top-[calc(var(--header-height)+var(--notification-height))]",center:"top-0 bottom-0 my-auto mx-0",bottom:"bottom-0"},[d,u]=(0,i.useState)(!1),[m,f]=(0,i.useState)(()=>({width:window.innerWidth,height:window.innerHeight})),h=d&&m.width<768;(0,i.useEffect)(()=>{u(!0)},[]);let g=(0,i.useCallback)(()=>{f({width:window.innerWidth,height:window.innerHeight})},[f]),x=e?.layoutType||"full-width",v=o[(0,l.cleanString)(e?.mobileFocusPoint)||"center"][0],y=o[(0,l.cleanString)(e?.desktopFocusPoint)||"center"][1],b=e?.mobileVideo||e?.video,j=h&&e?.mobileIcon?.src||e?.icon?.src,w=h?e?.mobileIcon?.width||e?.icon?.width:e?.icon?.width||50,k=e?.iconSizeUnit||"px",N=`${w}${k}`,S=h?c[(0,l.cleanString)(e?.mobileIconAlignment)||"center"]:c[(0,l.cleanString)(e?.iconAlignment)||"center"],P=h?b:e?.video,E=e?.videoControlOptions?.muteUnmute||e?.videoControlOptions?.playPause,C={default:"",center:"text-center"}[e?.labelPosition||"default"],I=e.overlayOpacity||0,F=e.displayLabelOrLogo||"label",T=e?.logoSizeUnit||"px",L=h?e?.mobileLogoWidth??e?.desktopLogoWidth:e?.desktopLogoWidth??100,$=`${L}${T}`,O=e.hideHeaderText??!1;return((0,i.useLayoutEffect)(()=>(window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)),[g]),d)?(0,t.jsx)("div",{className:(0,l.cn)("relative h-[100svh] text-primary-foreground",{"h-[80svh]":"short"===x},e.className),children:(0,t.jsxs)("div",{className:(0,l.cn)("grid h-full grid-rows-1",{"md:grid-cols-2":"two-images"===x}),children:[("full-width"===x||"short"===x)&&(0,t.jsxs)(t.Fragment,{children:["image"===e.mediaSource&&e.image?(0,t.jsxs)(t.Fragment,{children:[!h&&e.image&&(0,t.jsx)(n.default,{image:e.image,loading:"eager",sizes:"100vw",quality:85,className:"h-full w-full object-cover"}),h&&(0,t.jsx)(n.default,{image:e.mobileImage||e.image,loading:"eager",className:"h-full w-full object-cover"})]}):null,"video"===e.mediaSource&&e.video?e?.autoPlay?(0,t.jsx)("video",{...P,src:P?.src,autoPlay:!0,muted:!0,playsInline:!0,loop:!0,className:`${v} ${y} h-full w-full object-cover`,style:{objectFit:"cover",width:"100%",height:"100%"}}):(0,t.jsx)(s.Video,{...P,controlOptions:E&&e.videoControlOptions,muted:!0,autoPlay:!1,aspectRatio:"auto",volume:null,className:`${v} ${y}`}):null]}),"two-images"===x&&(0,t.jsxs)(t.Fragment,{children:[e.images.map((a,s)=>{let i=!e.mobileImage&&0===s;return(0,t.jsx)(n.default,{image:a,sizes:"50vw",loading:"eager",className:(0,l.cn)("hidden h-full w-full object-cover md:block",{block:i})},a._key)}),e.mobileImage?(0,t.jsx)(n.default,{image:e.mobileImage,sizes:"100vw",loading:"eager",className:"h-full w-full object-cover md:hidden"}):null]}),(0,t.jsx)("span",{className:"absolute inset-0 bg-black",style:{opacity:I}}),e?.icon?.src&&d&&(0,t.jsx)("div",{className:(0,l.cn)("absolute flex h-auto w-full items-center justify-center",S),children:(0,t.jsx)(a.Image,{src:j+"?w=600&format=auto&q=65",className:"object-contain",style:{width:`${N}`},alt:j})}),(0,t.jsxs)("div",{className:"absolute inset-0 grid grid-cols-1 grid-rows-3 px-5 py-9 md:px-14 md:py-16",style:{color:e.textColor},children:[(0,t.jsxs)("div",{className:"row-start-2 flex flex-col gap-5 self-center",children:["label"===F&&e.label&&(0,t.jsx)("div",{className:C,children:(0,t.jsx)("span",{className:"inline-flex items-center rounded-sm border bg-white px-1.5 pb-0.5 pt-[0.1875rem] text-[0.625rem] uppercase leading-none text-black",children:e.label})}),"logo"===F&&e.logo&&(0,t.jsx)(n.default,{image:e.logo,loading:"eager",className:"my-6 object-contain",style:{width:`${$}`}}),(0,t.jsx)("h1",{className:(0,r.default)("text-5xl font-medium tracking-[-0.03em] md:max-w-[600px] md:text-7xl",O&&"pointer-events-none invisible absolute h-0 w-0 select-none overflow-hidden opacity-0",e.headerTextStyle),children:e.headerText})]}),(0,t.jsxs)("div",{className:"row-start-3 mt-auto",children:[(0,t.jsx)("p",{className:"text-sm md:max-w-[360px]",children:e.byline}),(0,t.jsx)("div",{className:"mt-6 flex flex-wrap gap-3",children:e?.ctaButtons?.map((e,l)=>(0,t.jsx)(p,{btn:e},e?.btnText||l))})]})]})]})}):(0,t.jsx)("div",{className:(0,l.cn)("relative h-[100svh] text-primary-foreground",{"h-[80svh]":"short"===x},e.className),children:(0,t.jsxs)("div",{className:(0,l.cn)("grid h-full grid-rows-1",{"md:grid-cols-2":e?.layoutType==="two-images"}),children:[(0,t.jsx)("div",{className:"h-full w-full animate-pulse bg-neutral-200"}),(0,t.jsx)("span",{className:"absolute inset-0 bg-black",style:{opacity:e.overlayOpacity||0}}),(0,t.jsx)("div",{className:"absolute inset-0 grid grid-cols-1 grid-rows-3 px-5 py-9 md:px-14 md:py-16"})]})})};e.s(["Hero",()=>g],174729)},97532,e=>{"use strict";function t(e,l=null){return`"${e}": coalesce(
    ${e}[$locale][]{
      ...,
      markDefs[]{
        ...,
        _type == "internalLink" => {
          "page": page.document->{
            "type": _type,
            "slug": slug.current,
          }
        }
      }
    }, 
    ${e}[$baseLocale][]{
      ...,
      markDefs[]{
        ...,
        _type == "internalLink" => {
          "page": page.document->{
            "type": _type,
            "slug": slug.current,
          }
        }
      }
    }
  )`}e.s(["default",()=>t])},930866,853444,974862,242812,798289,803526,e=>{"use strict";var t=e.i(91663);new Date().toISOString();let l=`
   "id": _id,
    ${(0,t.default)("title")},
    ${(0,t.default)("description")},
    date,
    location,
    geopoint,
    measurement,
    simple_tag,
    "link": {
      "isInternal": link.isInternal,
      "internal":link.internal->{
        "pageType": _type,
        "slug": slug.current
      },
      "blank": link.blank,
      "href": link.href
    },
    "bgColor": colorScheme->{
      primary,
      secondary
    },
    "bgImage": image
`;(0,t.default)("title"),(0,t.default)("description"),e.s(["futureEventFields",0,l],853444);var a=e.i(97532);new Date().toISOString(),(0,t.default)("title"),(0,t.default)("title");let s=`
  *[_type == "storePage" ] {
    _id,
    "isFlagship": true,
    "id": _id,
    ${(0,t.default)("title")},
    city,
    country,
    address,
    "slug": slug.current,
    featuredImage,
    mobileFeaturedImage,
    storeIcon,
    "colorScheme": iccImages.storeColorScheme->,
    "preferredStoreImage": iccImages.preferredStoreImage,
    "backgroundImage": iccImages.backgroundImage,
    "geopoint": {
      "lng": geopoint.lng,
      "lat": geopoint.lat
    },
    shopifyUrl,
    splineId,
  } | order(city asc)
`;(0,t.default)("title"),(0,t.default)("title"),(0,t.default)("title"),(0,t.default)("description"),(0,t.default)("title"),(0,t.default)("description"),(0,t.default)("title"),(0,t.default)("description"),(0,a.default)("content"),(0,t.default)("description"),(0,t.default)("title"),(0,t.default)("description"),e.s(["flagshipStoreIccFragment",0,s],930866);var n=e.i(843476),i=e.i(174484),r=e.i(374829),o=e.i(977388),c=e.i(167881),d=e.i(948148),u=e.i(167225),m=e.i(178320),f=e.i(266027),h=e.i(271645),p=e.i(542430),g=e.i(838372),x=e.i(23750),v=e.i(623200),y=e.i(374009),b=e.i(95187);let j=(0,b.createServerReference)("40fe216e2c750a587c1a88685230fb186727c23ebf",b.callServer,void 0,b.findSourceMapURL,"findCities");e.s(["findCities",()=>j],974862);let w=(0,b.createServerReference)("407b1398758a164bbbe442272c607dad265a0f35a0",b.callServer,void 0,b.findSourceMapURL,"findCityDetails");e.s(["findCityDetails",()=>w],242812);let k=[{id:1,title:"London, GB"},{id:2,title:"Los Angeles, US"},{id:3,title:"Louisville, US"},{id:4,title:"Lisbon, PT"},{id:5,title:"Lodz, PL"},{id:6,title:"Lome, TG"},{id:7,title:"Lombok, ID"},{id:8,title:"Luanda, AO"},{id:9,title:"Luanda, AO"},{id:10,title:"Luanda, AO"},{id:11,title:"Luanda, AO"}];e.s(["mockCountries",()=>k],798289);var N=e.i(568692);let S=({id:e,title:t,setInputValue:l,selected:a,onLocationSelect:s,setSuggestedCities:i})=>(0,n.jsx)("li",{className:`flex w-full items-center transition duration-500 ease-in-out ${a?"cursor-not-allowed opacity-50":"cursor-pointer opacity-100"}`,onClick:()=>{a||w(e).then(e=>{s({...e}),l(""),i([])})},children:(0,n.jsx)("span",{className:"flex-1 px-10 py-[1px] text-sm leading-[30px] hover:bg-black/5",children:t})}),P=function({otherFilterLocation:e,onLocationSelect:t}){let[l,a]=(0,h.useState)(!1),[s,i]=(0,h.useState)([]),[r,o]=(0,h.useTransition)(),[c,m]=(0,h.useState)(""),f=(0,d.useTranslations)(),p=s?.length>0?s:[];return(0,h.useEffect)(()=>{r&&a(!0)},[r]),(0,h.useEffect)(()=>{a(!1)},[s]),(0,h.useEffect)(()=>{let e=(0,y.default)(async e=>{o(async()=>{if(u.default.env.STORYBOOK&&""!==c)return i(k);let t=await j(e);if(!t)return i([]);i(t)})},500);return e(c),()=>{e.cancel()}},[c]),(0,n.jsxs)("div",{className:"relative !mt-4 flex h-full w-full flex-col justify-center text-black",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 transform text-black opacity-100",children:(0,n.jsx)(N.default,{name:"search",className:"h-4 w-4 [&>svg]:h-full [&>svg]:w-full"})}),(0,n.jsx)(x.Input,{className:"focus-visible:border-1 h-auto w-full rounded-none border border-black/30 bg-transparent !py-[6px] px-0 pl-10 text-sm font-medium leading-[30px] text-black antialiased !placeholder-black caret-current placeholder:opacity-30",value:c,onChange:e=>{a(!0),m(e.target.value)},placeholder:f("accountPages.profileEvents.search_for_other_locations"),onBlur:()=>a(!1)})]}),(0,n.jsx)("div",{className:(0,v.cn)(l?"opacity-0":"opacity-100","absolute top-[44px] w-full transition duration-300 ease-in-out"),children:p?.length>0&&(0,n.jsx)("ul",{className:"group max-h-[40vh] overflow-y-scroll border border-t-0 border-black/30 bg-white py-2 sm:max-h-[50vh]",children:p?.map(l=>(0,n.jsx)(S,{id:l.id,title:l.title,setInputValue:m,selected:e?.length>0&&e.some(e=>e.id===l.id||e.title===l.title),onLocationSelect:t,setSuggestedCities:i},l.id)).filter(Boolean)})})]})};var E=e.i(625959);let C=({locations:e,onRemove:t})=>(0,n.jsx)("div",{className:"flex flex-wrap space-x-2",children:e?.map(e=>(0,n.jsxs)("span",{className:"flex items-center justify-center bg-black px-2 py-1 text-xs text-white",children:[(0,n.jsx)("div",{className:"mr-1 h-4 w-4 cursor-pointer",onClick:()=>t(e.id),children:(0,n.jsx)(N.default,{name:"close-bold",className:"h-4 w-4 text-white"})}),e.title]},e.id))});function I({eventFilter:e,setEventFilter:t,showChallengeEvent:l,setShowChallengeEvent:a,showIndoorCyclingEvent:i,setShowIndoorCyclingEvent:r}){let o=(0,d.useTranslations)(),[c,x]=(0,h.useState)(null),[v,y]=(0,h.useState)([]),{currentMarket:b}=(0,p.useMarketStore)(),{data:j=[]}=(0,f.useQuery)({queryKey:["stores"],queryFn:async()=>u.default.env.STORYBOOK?{}:await m.client.fetch(s,{locale:b.locale,baseLocale:g.defaultLocale.code,currentMarket:b.handle})}),w=(0,h.useMemo)(()=>j?.filter(e=>null!==e.shopifyUrl||null!==e.slug)?.map(e=>({text:e.title,value:e.shopifyUrl?.split(".myshopify.com")?.[0]??e.slug,geopoint:e.geopoint})),[j]),k=(0,h.useMemo)(()=>{let e=new Map;return w?.forEach(t=>{e.set(t.value,t)}),e},[w]);(0,h.useEffect)(()=>{if(!e||0===e.length){y([]),x([]);return}let t=[],l=[];e.forEach(e=>{"flagship"===e.storeType?t.push(e.id):"other"===e.storeType&&l.push(e)}),y(t),x(l)},[e]);let N=(0,h.useCallback)(e=>{t([...c||[],...e.map(e=>{let t=k.get(e);return t?{...t.geopoint,id:e,title:t.text,storeType:"flagship"}:null}).filter(Boolean)])},[k,c,t]),S=(0,h.useCallback)(e=>{a(e)},[a]),I=(0,h.useCallback)(e=>{r(e)},[r]),F=(0,h.useCallback)(l=>{if(c?.some(e=>e?.id===l?.id))return;let a={...l?.geopoint,id:l?.id,title:l?.title,storeType:"other"};x([...c||[],a]),t([...e||[],a])},[c,e,t]),T=(0,h.useCallback)(l=>{let a=c.filter(e=>e?.id!==l),s=e.filter(e=>e?.id!==l);x(a),t(s)},[c,e,t]);return(0,n.jsxs)("div",{className:"mt-5 space-y-4",children:[(0,n.jsx)("div",{className:"text-sm",children:o("accountPages.profileEvents.location_label")}),(0,n.jsx)("div",{children:w.map(e=>(0,n.jsx)("div",{className:"flex flex-row items-center gap-2 space-y-0",children:(0,n.jsxs)("label",{htmlFor:`checkbox-${e.value}`,className:"flex cursor-pointer flex-row items-center gap-2",children:[(0,n.jsx)(E.Checkbox,{id:`checkbox-${e.value}`,checked:v?.includes(e.value),onCheckedChange:t=>{N(t?[...v??[],e.value]:v.filter(t=>t!==e.value))}}),(0,n.jsx)("span",{className:"text-sm font-thin",children:e.text})]})},e.value))}),(0,n.jsx)(P,{otherFilterLocation:c,onLocationSelect:F}),(0,n.jsx)(C,{locations:c,onRemove:T}),(0,n.jsxs)("div",{className:"!mt-6 flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-sm",children:o("accountPages.profileEvents.virtual")}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex flex-row items-center gap-2 space-y-0",children:(0,n.jsxs)("label",{htmlFor:"checkbox-indoor-cycling",className:"flex cursor-pointer flex-row items-center gap-2",children:[(0,n.jsx)(E.Checkbox,{id:"checkbox-indoor-cycling",checked:i,onCheckedChange:e=>I(e)}),(0,n.jsx)("span",{className:"text-sm font-thin",children:o("accountPages.profileEvents.indoor_cycling")})]})})})]}),(0,n.jsxs)("div",{className:"!mt-6 flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-sm",children:o("accountPages.profileEvents.challenges")}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex flex-row items-center gap-2 space-y-0",children:(0,n.jsxs)("label",{htmlFor:"checkbox-virtual",className:"flex cursor-pointer flex-row items-center gap-2",children:[(0,n.jsx)(E.Checkbox,{id:"checkbox-challenge",checked:l,onCheckedChange:e=>S(e)}),(0,n.jsx)("span",{className:"text-sm font-thin",children:o("accountPages.profileEvents.midsummer")})]})})})]})]})}function F({eventCount:e,eventFilter:t,setEventFilter:l,setCloseSheet:a,defaultEventFilter:s,showChallengeEvent:i,setShowChallengeEvent:r,showIndoorCyclingEvent:o,setShowIndoorCyclingEvent:u}){let m=(0,d.useTranslations)();return(0,n.jsxs)("div",{className:"relative flex h-full w-full flex-grow flex-col pb-[300px] sm:mt-6 md:pb-[150px]",children:[(0,n.jsx)("div",{className:"flex-grow px-8",children:(0,n.jsx)(I,{eventFilter:t,setEventFilter:l,showChallengeEvent:i,setShowChallengeEvent:r,showIndoorCyclingEvent:o,setShowIndoorCyclingEvent:u})}),(0,n.jsxs)("footer",{className:"fixed bottom-0 right-0 w-full sm:max-w-[435px]",children:[(0,n.jsx)(c.Button,{type:"button",className:"h-[90px] w-full font-normal underline md:h-[60px]",variant:"secondary",onClick:()=>{l(s),r(!1),u(!1)},children:m("accountPages.profileEvents.reset_to_default")}),(0,n.jsxs)(c.Button,{type:"button",className:"h-[90px] w-full font-normal md:h-[60px]",onClick:()=>a(null),children:[m("accountPages.profileEvents.show_results")," ",`(${e})`]})]})]})}var T=e.i(852917);function L({open:e,setIsOpen:t,eventCount:l,eventFilter:a,setEventFilter:s,defaultEventFilter:c,showChallengeEvent:u,setShowChallengeEvent:m,showIndoorCyclingEvent:f,setShowIndoorCyclingEvent:h}){let p=(0,i.useUserStore)().customerData,g=(0,d.useTranslations)();return p?(0,n.jsx)(T.Sheet,{open:e,onOpenChange:e=>{e||t(null)},children:(0,n.jsxs)(T.SheetContent,{className:"flex flex-col items-start overflow-y-auto text-black sm:max-w-[435px]",side:"right",sideMobile:"bottom",children:[(0,n.jsx)(T.SheetHeader,{children:(0,n.jsx)(T.SheetTitle,{children:g("accountPages.profileEvents.filter_sheet_title")})}),(0,n.jsx)(r.AnimatePresence,{children:e&&(0,n.jsx)(o.motion.div,{exit:{opacity:0},className:"flex w-full flex-grow flex-col",children:(0,n.jsx)(F,{eventCount:l,eventFilter:a,defaultEventFilter:c,setEventFilter:s,setCloseSheet:()=>t(),showChallengeEvent:u,setShowChallengeEvent:m,showIndoorCyclingEvent:f,setShowIndoorCyclingEvent:h})})})]})}):null}e.s(["EventFilter",()=>L],803526)},963438,e=>{"use strict";var t=e.i(843476),l=e.i(977388),a=e.i(174484),s=e.i(647410),n=e.i(668229),i=e.i(167881);function r({hasAnimated:e,introductionBannerLoggedIn:r,introductionBannerLoggedOut:o,redirectPath:c}){let{userData:d}=(0,a.useUserStore)(),u=!!d;return(!u||r)&&(u||o)?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.motion.div,{initial:!e&&{opacity:0,y:30},animate:!e&&{opacity:1,y:0},transition:{type:"tween",damping:20,stiffness:100,delay:1.35},className:"grid gap-4 overflow-hidden rounded-md bg-white p-4 text-[--secondary] md:grid-cols-2 md:p-0 md:px-8 md:py-7",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"mb-3 text-lg font-medium",children:u?`${r?.title} ${d?.first_name}`:o?.title}),(0,t.jsx)("p",{className:"text-sm md:max-w-sm",children:u?r?.description:o?.description})]}),(0,t.jsx)("div",{className:"md:ml-auto md:flex-1 md:content-end",children:u?(0,t.jsx)(n.default,{href:`${r?.linkToAccountPage?c?"/account?redirectToSlug="+c:"/account":(0,s.resolveHref)(r?.ctaButton.pageType,r?.ctaButton.link)}`,children:(0,t.jsx)(i.Button,{className:"w-full bg-[--secondary]",children:r?.ctaButton.text})}):(0,t.jsx)(n.default,{href:`${o?.linkToAccountPage?c?"/account?redirectToSlug="+c:"/account":(0,s.resolveHref)(o?.ctaButton.pageType,o?.ctaButton.link)}`,children:(0,t.jsx)(i.Button,{className:"w-full bg-[--secondary]",children:o?.ctaButton.text})})})]})}):null}e.s(["IntroductionBanner",()=>r])},700228,e=>{"use strict";var t=e.i(167225),l=e.i(843476),a=e.i(178320),s=e.i(642366),n=e.i(948148),i=e.i(853444),r=e.i(266027),o=e.i(542430),c=e.i(838372),d=e.i(174484),u=e.i(930866),m=e.i(271645),f=e.i(803526),h=e.i(568692),p=e.i(963438),g=e.i(618566);function x(e,t){if(e.bgImage)return e.bgImage;if(e.simple_tag){let l=(e.simple_tag?.split("\n")?.[0]??e.simple_tag).replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/\s+/g,"").toLowerCase().trim();return t?.find(e=>e.tag.toLowerCase().trim()===l)?.image??null}return null}function v({events:e,colorScheme:t,eventImages:a,noEventsMessage:n}){return e&&e.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2 md:gap-3 lg:grid-cols-3 lg:gap-5",children:e.map((e,n)=>(0,l.jsx)("div",{className:"aspect-square",children:(0,l.jsx)(s.EventCard,{...e,overWriteBgColor:t,bgImage:x(e,a)})},n))}):(0,l.jsx)("div",{children:n})}function y({events:e,colorScheme:t,eventImages:a,noEventsMessage:s}){return(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:(0,l.jsx)(v,{events:e,colorScheme:t,eventImages:a,noEventsMessage:s})})})}function b({allEvents:e,colorScheme:t,introductionBannerLoggedOut:a,eventImages:s}){let i=(0,n.useTranslations)(),r=(0,g.usePathname)();return(0,l.jsxs)("div",{className:"flex flex-col gap-y-6 text-primary",children:[(0,l.jsx)(p.IntroductionBanner,{hasAnimated:!0,introductionBannerLoggedIn:null,introductionBannerLoggedOut:a,redirectPath:r+"?tab=events"}),(0,l.jsxs)("div",{style:{"--primary":t.secondary,"--secondary":t.secondary},className:"w-full rounded-md bg-white p-4 text-[--primary] md:p-8",children:[(0,l.jsx)("div",{className:"flex items-center pb-5 sm:pb-13",children:(0,l.jsx)("h1",{className:"md:leading-1 text-2xl font-medium tracking-[-0.03em] text-[--secondary] md:text-3xl",children:i("blocks.eventBlock.upcoming_events")})}),(0,l.jsx)(y,{events:e,colorScheme:t,eventImages:s,noEventsMessage:i("accountPages.profileEvents.no_events")})]})]})}function j({colorScheme:e,eventImages:s}){let p=(0,n.useTranslations)(),{currentMarket:g}=(0,o.useMarketStore)(),{userProfile:x}=(0,d.useUserStore)(),[v,b]=(0,m.useState)(!1),[j,w]=(0,m.useState)([]),[k,N]=(0,m.useState)(void 0),[S,P]=(0,m.useState)(!1),[E,C]=(0,m.useState)(!1),[I,F]=(0,m.useState)([]),[T,L]=(0,m.useState)(0),[$,O]=(0,m.useState)(null);(0,m.useEffect)(()=>{O(new Date().toISOString())},[]);let{data:_=[]}=(0,r.useQuery)({queryKey:["stores"],queryFn:async()=>t.default.env.STORYBOOK?{}:await a.client.fetch(u.flagshipStoreIccFragment,{locale:g.locale,baseLocale:c.defaultLocale.code,currentMarket:g.handle})});async function R(e,t,l){let s,n,r=(s=[],n="",(e&&t?n=' && (simple_tag == "midsummer" || "tag-midsummer" in tag[]._ref || simple_tag == "zwiftride" || simple_tag == "janres26virtual")':e?n=' && (simple_tag == "midsummer" || "tag-midsummer" in tag[]._ref)':t&&(n=' && (simple_tag == "zwiftride" || simple_tag == "janres26virtual")'),0===k.length)?`*[_type == "event" && date >= "${l}" && showOnProfile ${n}] | order(date asc) {
        ${i.futureEventFields}
      }`:(k.forEach(({lat:e,lng:t,id:a})=>{let r=`*[_type == "event" && date >= "${l}" && showOnProfile && (geo::distance(geopoint, geo::latLng(${e}, ${t})) < 200000 ${n})] | order(date asc) {
        ${i.futureEventFields},
        "distance": geo::distance(geopoint, geo::latLng(${e}, ${t})),
      }`;s.push(`"${a}": ${r}`)}),`{ ${s.join(", ")} }`));return await a.cdnClient.fetch(r,{locale:g.locale,baseLocale:c.defaultLocale.code,currentMarket:g.handle})}(0,m.useEffect)(()=>{$&&void 0!==k&&(async()=>{try{let e=await R(S,E,$),t=Object.values(e).flat(),l=new Map;t.forEach(e=>{l.has(e.id)||l.set(e.id,e)});let a=Array.from(l.values());w(a),L(a.length)}catch(e){console.error("Error fetching events:",e)}})()},[k,S,E,$]),(0,m.useEffect)(()=>{if(x?.profile&&_.length>0){let{lat:e,lng:t,title:l}=x?.profile?.find(({key:e})=>"location"===e)?.value||{lat:void 0,lng:void 0},a=_?.find(e=>e?.title===l),s=a?.shopifyUrl?.split(".myshopify.com")?.[0]||a?.slug||l,n=a?"flagship":"other";F([{lat:e,lng:t,title:l,id:s,storeType:n}]),N([{lat:e,lng:t,title:l,id:s,storeType:n}])}},[_]);let B=void 0!==k;return(0,l.jsxs)("div",{style:{"--primary":e.secondary,"--secondary":e.secondary},className:"w-full rounded-md bg-white p-4 text-[--primary] md:p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between pb-5 md:pb-8 lg:pb-13",children:[(0,l.jsx)("h1",{className:"md:leading-1 text-2xl font-medium tracking-[-0.03em] text-[--secondary] md:text-3xl",children:p("blocks.eventBlock.upcoming_events")}),(0,l.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-2",onClick:()=>b(!0),children:[(0,l.jsx)("span",{className:"text-sm",children:p("accountPages.profileEvents.filter_label")}),(0,l.jsxs)("div",{className:"relative flex leading-5",children:[(0,l.jsx)(h.default,{name:"filter-new",className:"-mt-[1px]"}),B&&(0,l.jsx)("div",{className:"absolute -right-[5px] -top-[5px]",children:(0,l.jsx)("div",{className:"h-2 w-2 rounded-full bg-[--secondary]"})})]})]})]}),(0,l.jsx)(y,{events:j,colorScheme:e,eventImages:s,noEventsMessage:p("accountPages.profileEvents.no_events")}),(0,l.jsx)(f.EventFilter,{open:v,setIsOpen:b,eventCount:T,eventFilter:k,setEventFilter:N,defaultEventFilter:I,showChallengeEvent:S,setShowChallengeEvent:P,showIndoorCyclingEvent:E,setShowIndoorCyclingEvent:C})]})}function w({allEvents:e,colorScheme:t,eventImages:a,introductionBannerLoggedOut:s}){let{userData:n}=(0,d.useUserStore)();return n?(0,l.jsx)(j,{eventImages:a,colorScheme:t}):(0,l.jsx)(b,{allEvents:e,introductionBannerLoggedOut:s,colorScheme:t,eventImages:a})}e.s(["EventContainer",()=>y,"EventsTab",()=>w,"getImageForEvent",()=>x])},367758,e=>{"use strict";var t=e.i(843476),l=e.i(271645),a=e.i(948148),s=e.i(637837),n=e.i(630374),i=e.i(416883);function r({title:e,images:r=[]}){let o=(0,a.useTranslations)(),[c,d]=(0,l.useState)(null);return(0,t.jsxs)("section",{children:[(0,t.jsx)("div",{className:"mt-[20px] overflow-hidden py-10",children:(0,t.jsx)("div",{className:"mx-5 @md:mx-10 @lg:mx-[50px]",children:(0,t.jsx)(s.Carousel,{slidesPerView:1,breakpoints:{768:{slidesPerView:2}},title:e||o("blocks.galleryBlock.gallery"),children:r&&r.filter(e=>e).length>0&&r.filter(e=>e).map((e,l)=>(0,t.jsx)("div",{className:"relative cursor-pointer",onClick:()=>{d(e)},children:(0,t.jsx)("figure",{className:"aspect-h-4 aspect-w-4",children:(0,t.jsx)(i.default,{image:e,urlOptions:{width:1280},sizes:"33vw",className:"h-full w-full object-cover"})})},l))})})}),c&&(0,t.jsx)(n.Dialog,{open:!0,onOpenChange:()=>{d(null)},children:(0,t.jsx)(n.DialogOverlay,{className:"bg-black/50 backdrop-blur-none",children:(0,t.jsx)(n.DialogContent,{"aria-label":"Image preview",className:"flex h-full max-h-full w-full max-w-full rounded-none bg-white p-0",closeIconClass:"text-black",children:(0,t.jsx)("div",{className:"flex h-screen w-full overflow-y-auto",children:(0,t.jsx)(i.default,{image:c,urlOptions:{width:1280},className:"m-auto h-full w-full max-w-[90%] object-contain"})})})})})]})}e.s(["Gallery",()=>r])}]);